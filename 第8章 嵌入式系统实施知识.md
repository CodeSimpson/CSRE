

## 第8章 嵌入式系统实施知识

> 就是软件测试

### 1. 软件测试

软件测试只能对软件进行评估，间接反映软件的质量，但==软件测试不能作为评价标准==。

嵌入式软件的测试工作与台式机上应用软件的测试工作的区别在于

* 硬件部分需要用专门的测试仪器
* 测试过程相对复杂
* 除了软件逻辑上的正确性，还看重系统的性能和健壮性
* 实时性
* 嵌入式系统开发一个软硬件互相协调、互相反馈和互相测试的过程。

#### 1.1 测试方法

按照程序是否执行可分为：

* 动态测试：软件实际运行一遍，包含功能确认与接口测试、==覆盖率分析==、性能分析、内存分析、系统压力测试等
  * 黑盒测试：根据==软件需求规则说明书==来设计测试用例
  * 白盒测试：使用白盒测试方法时，确定测试数据应根据==程序的功能文档==和==指定的覆盖标准。==
  * 灰盒测试：
* 静态测试：包含代码检查、静态结构分析、==代码质量度量==等
  * 桌前检查：代码编写人员自查
  * 代码审查：开会审查，不需要提供测试用例
  * 代码走查：开发审查，需要提供测试用例

#### 1.2 测试用例设计

按照测试用例的设计方法可分为：

* 黑盒测试法

  * 等价类划分：将一个区间取一个数作为区间等价。
  * 边界值分析：边界值 + 稍小于最小值 + 稍大于最大值。
  * 错误推测：根据专家经验提供测试用例 
  * 因果图

* 白盒测试法

  * 基本路径测试

  * 循环覆盖测试

  * 逻辑覆盖测试

    > 判断本身：指大于小于
    >
    > 逻辑条件：指与或非

    * 语句覆盖（SC）：指设计足够的测试用例，运行被测程序，让程序中的所有语句至少执行一次。
    * 判定覆盖/分支覆盖（DC）：指设计足够的测试用例，使得程序中每个判定的每一种可能结果至少出现一次，被测试程序==每个判断本身的真假==分支都要覆盖。
    * 条件覆盖（CC）：设计足够的测试用例，使得程序中的每个判定的每一种可能结果至少出现一次，被测试程序的==每个逻辑条件==的可能值至少被满足一次

    > **判定覆盖只关心判定表达式的值（真/假），而条件覆盖涉及到判定表达式的每个条件的值（真/假）。**

    * 路径覆盖：覆盖程序所有可能的路径。

    > 以上覆盖准则中，最强的准则是路径覆盖，最弱的准则是语句覆盖。

    * 条件判定覆盖（C/DC）：被测试程序中的==每个判断本身==的判定结果（真假）至少满足一次，同时==每个逻辑条件==的可能值也至少被满足一次。

    * 条件组合覆盖（MCC）：使测试程序中的每个判断的所有可能条件取值的组合至少被满足一次

      ​	a. 条件组合只针对同一个判断语句内存在多个条件的情况

      ​	b. 不同的判断语句内的条件取值之间无需组合

      ​	c. 对于单条件的判断语句，只需要满足自己的所有取值即可

    * 修正的条件判定覆盖（MC/DC）：是条件判定覆盖的子集

      > 不懂可以看例题：https://www.bilibili.com/video/BV1ch4y1V7sj/?p=8&spm_id_from=333.880.my_history.page.click&vd_source=89928f4f29ee22619e6cca9c6bc5635f

       	a. 要求在一个程序中的每一种输入输出至少得出现一次，在程序中的每一个条件必须产生所有可能的输出结果至少一次，并且每一个判定中的每个条件必须能独立影响一个判定的输出，==即在其它条件不变的前提下，仅改变这个条件的值，而使得判定结果改变。==

      ​	b. 要先实现条件覆盖、判定覆盖，在此基础上，对每一个条件C，要求存在符合以下条件的两次计算

      ​		 b.1 条件C所在判定内的所有条件，除条件C外，其他条件的取值完全相同

      ​		 b.2 条件C的取值相反

      ​         b.3 判定的计算结果相反
    
    > ==逻辑覆盖的英文简称需要掌握==
    >
    > 百盒测试：https://blog.csdn.net/mumiandeci/article/details/134891393

#### 1.3 测试阶段/测试级别

按照开发阶段划分，软件测试可分为：

* 单元测试：白盒测试
* 集成测试：也用白盒测试
  * 一次性组装
  * 增量式组装
    * 自顶向下
    * 自底向上
    * 混合式
* 确认测试：黑盒测试
  * 内部确认测试
  * Alpha测试：项目型
  * Beta测试：项目型，只有经过Beta测试后才能发布给用户
  * 验收测试
* 系统测试：灰盒测试
  * 恢复测试
  * 强度测试
  * 性能测试
  * 可靠性测试

### 2. 软件调试

开发嵌入式软件时，交叉调试是必不可少的一步，嵌入式软件调试的特点为：

* 调试器和被调试程序运行在不同机器上
* 调试器通过某种通信方式与目标机建立联系
* 在目标机上一般有调试器的某种代理，这种代理能配合调试器一起完成对目标机上运行程序的调试

#### 2.1 调试方法

* 直接测试法：在宿主机上开发，然后将编译好的程序固化到目标机上运行，测试错误。
* 调试监控器法：宿主机上有调试器，目标机上有监控器，建立链接（JTag口），通过调试器将程序下载到监控器上。
* Rom仿真器法
* 在线仿真器法：仿真CPU
* 片上调试法：OCD，通过JTAG口，支持调试模式或者运行模式。
* 模拟器法

#### 2.2 调试和测试的区别

* 测试的目的是找出存在的错误（不会改程序），而调试的目的是定位错误并修改程序加以改正。
* 调试是测试之后的活动，测试和调试在目标、方法和思路上有所不同。
* 测试从一个已知的条件开始，使用预先定义的过程，有预知的结果；调试从一个未知的条件开始，结束的过程不可预知
* 测试过程可以事先设计，进度可以事先确认；调试不能描述过程或持续时间。

### 3. 软件评审

提高软件质量的手段

* 不应以测试代替评审
* 评审人员应关注产品而不是评论开发人员
* 评审人员应关注实质性问题
* 评审会议不应变为问题解决方案讨论会
* 评审应被安排进入项目计划
* 评审参与者应了解整个评审过程
* 评审人员事先应对评审材料充分了解
* 重视评审的组织工作

### 4. 验证与确认

**验证关注过程，确认关注最终结果**

* 验证是指在软件开发周期中的一个给定阶段的产品是否达到在上一阶段确立的需求的过程
* 确认是指在软件开发过程结束时对软件进行评价以确认它是否和软件需求相一致的过程
* 测试是验证和确认的手段之一。
* 验证软件的手段有测试、同行评审、审查、走查、模拟、演示等。

### 5. 下午题专题训练3

